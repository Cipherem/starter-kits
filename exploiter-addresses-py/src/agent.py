from os import environ
from .blocklisted_check import handle_transaction as blocklisted_check

from .constants import ZETTABLOCK_KEY


def initialize():
    environ["ZETTABLOCK_API_KEY"] = ZETTABLOCK_KEY


def provide_handle_transaction(blocklisted_check):
    def handle_transaction(transaction_event):
        findings = blocklisted_check(transaction_event)

        return findings

    return handle_transaction


real_handle_transaction = provide_handle_transaction(blocklisted_check)


def handle_transaction(transaction_event):
    return real_handle_transaction(transaction_event)
